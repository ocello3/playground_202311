# きっかけ
GENUARYのPerfect loop / Infinite loop / endless GIFsから始めた。Loopと聞くとカセットテープを模したop-1のテープレコーダーをが頭に浮かんで、4トラックのカセットプレーヤーを並べて、4つの会話フレーズを交互に再生するスケッチにした。

# 考え中
- 再生と再生の間の空白の間隔を制御する。
- 再生を開始するタイミングの管理: 1つのトラックの再生が終わったら、そのトラックを小さく逆再生し、次のトラックを選び再生開始する。逆再生が終わると待機する。
- 背景音としてノイズを薄く再生する。

# おわり
- mp3が再生できることを確認する。
- テープの外枠を4つ左上から右下に向かって並べる。
- リールの外枠を描画する。
- レイヤーごとにp5.Graphicsを生成して、フレームごとにimage() → clear()する。
- 歯車書く。始点と終点、本数、長さ、間隔角度に回転角度。
- 歯車回す（回転した角度と前フレームの座標から計算できる？）
- debugのbugをdebug
- テープの支点を書く
- テープ書く
- 巻かれたテープを書く
- reel.contactの位置に巻かれたテープの厚みを反映する
- 再生をコントロールする仕組みを考える。
- paramではflagのみ管理する。callbackでもdtを操作できそう。
- iPadだとpGraphicsを複数描画するとかなり重くなるので、レイヤーを1枚にまとめる
- 再生のコントロールの再生向きをrateで判別しているが別の方法に変えて、rateの符号をなくす。
- draw及びsoundの再生を別ファイルにする
- reelの回転速度をrateにして、向きをplay/reverseから決定する。

# 待ち
- player.ctrl.statusの計算が間違っている気がする。最後のelse ifで前フレームのstatusはkeepなので判別できていなさそう。nxtが配列になっていて、どのindexが再生されているか分からない。
- 再生時にmp3が再生されてしまう問題を解決する。
- 4トラックに分ける
- 音量の調節（全部0は大きすぎる）
- nxtで次のトラックを選ぶ時に再生が終了したばかりのトラックも選ばれるので、除外したい。
- 再生時の音量を取得してテープに波形を表示する

# 再生の管理
play, reverse, stopの3つの状態を遷移する。
初期値はすべてstopとする。 -> どれかをplay
onendedとして、play -> reverse、reversr -> stopを設定する。

決めること
- stopからstartへのトリガーをどうするか
- 1フレーム目では再生開始したくない -> isInitでなければ最初のトラックをplayに更新

前フレームと同じ -> 何もしない
前フレームと違う -> 変更後の状態を実行する